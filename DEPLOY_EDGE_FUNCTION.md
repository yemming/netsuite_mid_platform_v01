# ğŸ”„ Edge Function éƒ¨ç½²èªªæ˜

## ç•¶å‰ç‹€æ…‹

å·²æ”¹é€² Edge Functionï¼Œæ·»åŠ äº†ï¼š
- âœ… è«‹æ±‚é–‹å§‹æ™‚çš„æ—¥èªŒè¨˜éŒ„
- âœ… ç’°å¢ƒè®Šæ•¸æª¢æŸ¥æ—¥èªŒ
- âœ… JSON è§£æéŒ¯èª¤çš„å–®ç¨è™•ç†
- âœ… æ›´è©³ç´°çš„éŒ¯èª¤è¨Šæ¯

## ğŸ“‹ éƒ¨ç½²æ­¥é©Ÿ

ç”±æ–¼æª”æ¡ˆè¼ƒå¤§ï¼ˆ603è¡Œï¼‰ï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹ä»»ä¸€æ–¹å¼éƒ¨ç½²ï¼š

### æ–¹æ³• 1ï¼šä½¿ç”¨ Supabase Dashboardï¼ˆæ¨è–¦ï¼‰

1. æ‰“é–‹ Supabase Dashboard
2. é€²å…¥ **Edge Functions** é é¢
3. æ‰¾åˆ° **sync-netsuite** å‡½æ•¸
4. é»æ“Š **Edit** æˆ– **Deploy** æŒ‰éˆ•
5. è¤‡è£½ `supabase/functions/sync-netsuite/index.ts` çš„å…§å®¹
6. è²¼ä¸Šä¸¦ä¿å­˜/éƒ¨ç½²

### æ–¹æ³• 2ï¼šä½¿ç”¨ Supabase CLI

```bash
# å®‰è£ Supabase CLIï¼ˆå¦‚æœé‚„æ²’å®‰è£ï¼‰
npm install -g supabase

# ç™»å…¥
supabase login

# éƒ¨ç½²
cd /Users/mingyou/Documents/cursor/NetSuite_Platform
supabase functions deploy sync-netsuite
```

## ğŸ” éƒ¨ç½²å¾Œæª¢æŸ¥

éƒ¨ç½²å®Œæˆå¾Œï¼Œè«‹ï¼š

1. **å†æ¬¡è§¸ç™¼åŒæ­¥æ¸¬è©¦**
   - åœ¨ç¶²ç«™ä¸Šé»æ“ŠåŒæ­¥æŒ‰éˆ•
   - æˆ–ä½¿ç”¨ APIï¼š`POST /api/sync/netsuite/datasets`

2. **æŸ¥çœ‹ Edge Function æ—¥èªŒ**
   - åœ¨ Supabase Dashboard â†’ Edge Functions â†’ sync-netsuite â†’ Logs
   - æ‡‰è©²æœƒçœ‹åˆ°ï¼š
     - `[æ™‚é–“æˆ³] Edge Function æ”¶åˆ°è«‹æ±‚: POST ...`
     - `ç’°å¢ƒè®Šæ•¸æª¢æŸ¥: { hasSupabaseUrl: true/false, ... }`
     - `é–‹å§‹è§£æè«‹æ±‚ JSON`
     - `è«‹æ±‚è§£ææˆåŠŸ: { hasTaskId: true, hasDatasetName: true }`
   - æˆ–éŒ¯èª¤è¨Šæ¯ï¼ˆå¦‚æœä»æœ‰å•é¡Œï¼‰

3. **æ ¹æ“šæ—¥èªŒè¨ºæ–·å•é¡Œ**
   - å¦‚æœçœ‹åˆ° `ç’°å¢ƒè®Šæ•¸æª¢æŸ¥` ä¸­æœ‰ `false`ï¼Œè¡¨ç¤ºè©² Secret æœªè¨­å®š
   - å¦‚æœçœ‹åˆ° `è§£æè«‹æ±‚ JSON å¤±æ•—`ï¼Œè¡¨ç¤ºè«‹æ±‚æ ¼å¼æœ‰å•é¡Œ
   - å¦‚æœçœ‹åˆ°å…¶ä»–éŒ¯èª¤ï¼Œè«‹å‘Šè¨´æˆ‘å…·é«”éŒ¯èª¤è¨Šæ¯

## ğŸ“ é æœŸè¡Œç‚º

éƒ¨ç½²æˆåŠŸå¾Œï¼ŒEdge Function æ‡‰è©²ï¼š
1. åœ¨æ”¶åˆ°è«‹æ±‚æ™‚ç«‹å³è¨˜éŒ„æ—¥èªŒ
2. æª¢æŸ¥ä¸¦è¨˜éŒ„ç’°å¢ƒè®Šæ•¸ç‹€æ…‹
3. è§£æè«‹æ±‚ JSONï¼ˆå–®ç¨è™•ç†éŒ¯èª¤ï¼‰
4. åŸ·è¡ŒåŒæ­¥é‚è¼¯

## âš ï¸ å¦‚æœä»æœ‰ 500 éŒ¯èª¤

è«‹æŸ¥çœ‹ Supabase Dashboard ä¸­çš„è©³ç´°æ—¥èªŒï¼Œä¸¦å‘Šè¨´æˆ‘ï¼š
1. æ˜¯å¦çœ‹åˆ° `Edge Function æ”¶åˆ°è«‹æ±‚` æ—¥èªŒï¼Ÿ
2. `ç’°å¢ƒè®Šæ•¸æª¢æŸ¥` çš„è¼¸å‡ºæ˜¯ä»€éº¼ï¼Ÿ
3. æ˜¯å¦æœ‰ä»»ä½•éŒ¯èª¤è¨Šæ¯ï¼Ÿ

é€™äº›ä¿¡æ¯å°‡å¹«åŠ©æˆ‘é€²ä¸€æ­¥è¨ºæ–·å•é¡Œã€‚

